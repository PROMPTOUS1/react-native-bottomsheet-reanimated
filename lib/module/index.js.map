{"version":3,"sources":["index.tsx"],"names":["React","useState","useRef","forwardRef","useImperativeHandle","View","StyleSheet","Dimensions","TouchableWithoutFeedback","Keyboard","Animated","Extrapolate","Interactable","Screen","width","get","height","_deltaY","Value","Index","isBackDropDismissByPress","initialPosition","y","onChangeSnap","snapPoints","bottomSheerColor","backDropColor","isRoundBorderWithTipHeader","tipHeaderRadius","header","body","isBackDrop","isModal","dragEnabled","isAnimatedYFromParent","animatedValueY","containerStyle","bodyContainerStyle","tipStyle","headerStyle","bodyStyle","onClose","bounce","ref","bottomPanel","_snapPoints","getSnapPoints","_initialPosition","getInitialPosition","isDismissWithPress","isBottomSheetDismissed","setIsBottomSheetDismissed","onDrawerSnap","snap","index","nativeEvent","value","dismissBottomSheet","findIndex","x","current","snapTo","dismiss","styles","panelContainer","backgroundColor","opacity","interpolate","inputRange","outputRange","extrapolateRight","CLAMP","top","marginTop","modal","panel","shadowColor","shadowOffset","shadowRadius","shadowOpacity","borderTopLeftRadius","borderTopRightRadius","panelHandle","panelHeader","create","container","flex","position","alignSelf","borderRadius","marginVertical","padding","bottom","left","right","map","snapItem","parentValue","split","snapObject","snapPoint"],"mappings":"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","sourcesContent":["import React, {\n  useState,\n  useRef,\n  forwardRef,\n  useImperativeHandle,\n} from 'react';\n\nimport {\n  View,\n  StyleSheet,\n  Dimensions,\n  TouchableWithoutFeedback,\n  Keyboard,\n  StyleProp,\n  ViewStyle,\n} from 'react-native';\n\nimport Animated, { Extrapolate } from 'react-native-reanimated';\nimport Interactable from 'react-native-interactable-reanimated';\n\nconst Screen = {\n  width: Dimensions.get('window').width,\n  height: Dimensions.get('window').height,\n};\ntype Porps = {\n  isBackDropDismissByPress: boolean;\n  initialPosition: object | any;\n  onChangeSnap: (data: object) => void;\n  snapPoints: Array<any>;\n  bottomSheerColor: string;\n  backDropColor: string;\n  isRoundBorderWithTipHeader: boolean;\n  tipHeaderRadius: number;\n  header: React.ReactNode;\n  body: React.ReactNode;\n  isBackDrop: boolean;\n  isModal: boolean;\n  dragEnabled: boolean;\n  isAnimatedYFromParent: boolean;\n  animatedValueY: any;\n  containerStyle: StyleProp<ViewStyle>;\n  bodyContainerStyle: StyleProp<ViewStyle>;\n  tipStyle: StyleProp<ViewStyle>;\n  headerStyle: StyleProp<ViewStyle>;\n  bodyStyle: StyleProp<ViewStyle>;\n  onClose: () => void;\n  bounce: number;\n};\nconst _deltaY = new Animated.Value(Screen.height);\nconst Index = forwardRef(\n  (\n    {\n      isBackDropDismissByPress,\n      initialPosition = { y: 0 },\n      onChangeSnap,\n      snapPoints,\n      bottomSheerColor = '#FFFFFF',\n      backDropColor = '#000000',\n      isRoundBorderWithTipHeader = false,\n      tipHeaderRadius = 12,\n      header,\n      body,\n      isBackDrop = false,\n      isModal,\n      dragEnabled = true,\n      isAnimatedYFromParent,\n      animatedValueY,\n      containerStyle,\n      bodyContainerStyle = {},\n      tipStyle,\n      headerStyle,\n      bodyStyle,\n      onClose,\n      bounce = 0.5,\n    }: Porps,\n    ref\n  ) => {\n    const bottomPanel = useRef<any>();\n    const _snapPoints = getSnapPoints(snapPoints);\n    const _initialPosition = getInitialPosition(initialPosition);\n    const isDismissWithPress = isBackDropDismissByPress\n      ? isBackDropDismissByPress\n      : false;\n    const [\n      isBottomSheetDismissed,\n      setIsBottomSheetDismissed,\n    ] = useState<boolean>(initialPosition === 0 || initialPosition === '0%');\n\n    const onDrawerSnap = (snap: any) => {\n      const index = snap.nativeEvent.index;\n      const value = snapPoints[index];\n      if (value === 0 || value === '0%') {\n        setIsBottomSheetDismissed(true);\n      } else {\n        setIsBottomSheetDismissed(false);\n      }\n      onChangeSnap && onChangeSnap({ index, value });\n    };\n\n    const dismissBottomSheet = () => {\n      let index = snapPoints.findIndex(\n        (x: number | string) => x === 0 || x === '0%'\n      );\n      if (index !== -1) {\n        bottomPanel.current.snapTo({ index });\n        onClose && onClose();\n      }\n    };\n\n    const snapTo = (index: number) => {\n      if (snapPoints.findIndex((x) => x === 0 || x === '0%') !== -1) {\n        Keyboard.dismiss();\n      }\n      bottomPanel.current.snapTo({ index });\n    };\n\n    useImperativeHandle(ref, () => ({\n      snapTo,\n      dismissBottomSheet,\n    }));\n\n    return (\n      <View style={styles.panelContainer} pointerEvents={'box-none'}>\n        {/* Backdrop */}\n        {isBackDrop && (\n          <Animated.View\n            pointerEvents={!isBottomSheetDismissed ? 'auto' : 'box-none'}\n            style={[\n              styles.panelContainer,\n              {\n                backgroundColor: backDropColor,\n                opacity: isAnimatedYFromParent\n                  ? animatedValueY.interpolate({\n                      inputRange: [0, Screen.height - 100],\n                      outputRange: [1, 0],\n                      extrapolateRight: Extrapolate.CLAMP,\n                    })\n                  : _deltaY.interpolate({\n                      inputRange: [0, Screen.height - 100],\n                      outputRange: [1, 0],\n                      extrapolateRight: Extrapolate.CLAMP,\n                    }),\n              },\n            ]}\n          />\n        )}\n\n        <Interactable.View\n          dragEnabled={isModal ? false : dragEnabled}\n          verticalOnly={true}\n          ref={bottomPanel}\n          snapPoints={_snapPoints}\n          initialPosition={_initialPosition}\n          boundaries={{ top: isModal ? 0 : -300, bounce: bounce }}\n          animatedValueY={isAnimatedYFromParent ? animatedValueY : _deltaY}\n          onSnap={onDrawerSnap}\n        >\n          {!isModal && isDismissWithPress && !isBottomSheetDismissed && (\n            <TouchableWithoutFeedback\n              onPress={dismissBottomSheet}\n              disabled={isBackDrop ? false : true}\n            >\n              <View\n                style={{\n                  height: Screen.height,\n                  marginTop: -Screen.height,\n                }}\n              />\n            </TouchableWithoutFeedback>\n          )}\n\n          <View\n            style={[\n              isModal ? styles.modal : styles.panel,\n              { backgroundColor: bottomSheerColor },\n              isRoundBorderWithTipHeader\n                ? [\n                    {\n                      backgroundColor: '#f7f5eee8',\n                      shadowColor: '#000000',\n                      shadowOffset: { width: 0, height: 0 },\n                      shadowRadius: 5,\n                      shadowOpacity: 0.4,\n                    },\n                    {\n                      borderTopLeftRadius: tipHeaderRadius,\n                      borderTopRightRadius: tipHeaderRadius,\n                    },\n                  ]\n                : {},\n              containerStyle,\n            ]}\n          >\n            <View\n              style={[\n                isModal ? styles.modal : styles.panel,\n                bodyContainerStyle,\n              ]}\n            >\n              {!isModal && isRoundBorderWithTipHeader && (\n                <View style={[styles.panelHandle, tipStyle]} />\n              )}\n              {!isModal && (\n                <View style={[styles.panelHeader, headerStyle]}>{header}</View>\n              )}\n              <View style={bodyStyle}>{body}</View>\n            </View>\n          </View>\n        </Interactable.View>\n      </View>\n    );\n  }\n);\n\nexport default Index;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  panelHandle: {\n    position: 'absolute',\n    alignSelf: 'center',\n    width: 40,\n    height: 6,\n    borderRadius: 4,\n    backgroundColor: '#00000040',\n    marginVertical: 8,\n  },\n  panel: {\n    height: Screen.height + 300,\n  },\n  modal: {\n    height: Screen.height + 300,\n  },\n  panelHeader: {\n    padding: 16,\n  },\n  panelContainer: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n});\n\nconst getSnapPoints = (snapPoints: any) => {\n  return snapPoints.map((snapItem: any) => {\n    if (typeof snapItem === 'string') {\n      const parentValue: any = snapItem.split('%')[0];\n      snapItem = (Screen.height / 100) * parentValue;\n    }\n    const snapObject = { y: Screen.height - snapItem };\n    return snapObject;\n  });\n};\n\nconst getInitialPosition = (snapPoint: any) => {\n  if (typeof snapPoint === 'string') {\n    const parentValue: any = snapPoint.split('%')[0];\n    snapPoint = (Screen.height / 100) * parentValue;\n  }\n  const snapObject = { y: Screen.height - snapPoint };\n  return snapObject;\n};\n"]}